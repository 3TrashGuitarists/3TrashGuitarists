<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <title>3TrashGuitarists Register</title>

  <link href="/static/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="/static/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="/static/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="/static/vendor/venobox/venobox.css" rel="stylesheet">
  <link href="/static/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="/static/css/style.css" rel="stylesheet">
  <style type="text/css">
    .contact .email-form #button-sign-up{

      background: #009961;
      border: 0;
      padding: 10px 30px;
      margin-left: 30px;
      margin-right: 30px;
      color: #fff;
      transition: 0.4s;
      border-radius: 50px;
    }

    .return-message {
      color: #ff5454;
      margin: 0 0 0 0;
      font-weight: 100;
      font-size: 15px;
    }
  </style>

</head>
<body>
<header id="header" class="fixed-top ">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-xl-9 d-flex align-items-center justify-content-between">
        <h1 class="logo"><a href="{{urlfor "HomeController.Get"}}">3TrashGuitarists</a></h1>
        <nav class="nav-menu d-none d-lg-block">
          <ul>
            <li><a href="{{urlfor "HomeController.Get"}}">Home</a></li>
            <li class="drop-down"><a href="/#brand">Brand</a>
              <ul>
                <li><a href="{{urlfor "FenderController.Get"}}">Fender</a></li>
                <li><a href="{{urlfor "SuhrController.Get"}}">Suhr</a></li>
                <li><a href="{{urlfor "IbanezController.Get"}}">Ibanez</a></li>
                <li><a href="{{urlfor "CharvelController.Get"}}">Charvel</a></li>
                <li><a href="{{urlfor "ESPController.Get"}}">ESP</a></li>
                <li><a href="{{urlfor "TAController.Get"}}">Tom Anderson</a></li>
              </ul>
            </li>
            <li><a href="#Search">Search</a></li>
            <li><a href="{{urlfor "AboutUsController.Get"}}">About Us</a></li>
            <li><a href="{{urlfor "ContactController.Get"}}">Contact</a></li>
          </ul>
        </nav>
        <a href="{{urlfor "SignInController.Get"}}" class="sign-in">Sign In</a>
      </div>
    </div>
  </div>


</header>

<section id="front-picture" class="d-flex flex-column justify-content-center standard-pic">


  <div id="contact" class="contact">


    <div>
      <iframe style="border:0; width: 100%; height: 150px;" src="" frameborder="0" allowfullscreen></iframe>
    </div>

    <div class="container">
      <div class="row justify-content-center">
        <div class="col-xl-8">
          <h2>3TrashGuitarists Sign Up</h2>
        </div>
      </div>
      <div class="row mt-1">
        <div class = "col-lg-3"></div>


        <div class="col-lg-9 mt-lg-0">

          <form id="sign-up" method="post" class="email-form">

            <div class="col-md-8 form-group">
              <input type="text" name="username" class="form-control" id="username" onblur="alertusername()" onblur="this.value=this.value.replace(/\s+/g,'')" onkeyup="this.value=this.value.replace(/\s+/g,'')" placeholder="User Name: 4~16 characters"/>
              <h4 class="return-message" id="alertusername"></h4>
              <h4 class="return-message" id="check_username_dup"></h4>
              <!-- <h4 class="return-message" id = "check_username_format"></h4> -->

            </div>
            <div class="col-md-8 form-group">
              <input type="text" class="form-control" name="password" id="password" onblur="alertpassword()" onblur="this.value=this.value.replace(/\s+/g,'')" onkeyup="this.value=this.value.replace(/\s+/g,'')" placeholder="Password: 6~16 with at least 1 character"/>
              <h4 class="return-message" id="alertpassword"></h4>
              <!-- <h4 class="return-message" id = "check_password"></h4> -->
            </div>
            <div class="col-md-8 form-group">
              <input type="text" class="form-control" name="repassword" id="repassword" onblur="alertrepassword()" onblur="this.value=this.value.replace(/\s+/g,'')" onkeyup="this.value=this.value.replace(/\s+/g,'')" placeholder="Re-enter your password again"/>
              <h4 class="return-message" id="alertrepassword"></h4>
              <!-- <h4 class="return-message" id="check_repassword"></h4> -->
            </div>
            <div class="col-md-8 form-group">
              <input type="text" class="form-control" name="email" id="email" onblur="alertemail()" placeholder="E-mail"/>
              <h4 class="return-message" id="alertemail"></h4>
              <!-- <h4 class="return-message" id="check_email"></h4> -->
              <h4 class="return-message" id="check_email_dup"></h4>
            </div>
            <div class="col-md-8 form-group">
              <input type="text" class="form-control" name="address1" id="address1" placeholder="Your address"/>
              <!-- <h4 class="return-message" id="check_address1"></h4> -->
            </div>


            <div class="col-md-8"><button type="button" id="button-sign-up" >Sign Up</button></div>

          </form>

        </div>
      </div>
    </div>
  </div>
</section>

<footer id="footer">
  <div class="container">
    <h3>3TrashGuitarists</h3>
    <p>We sell electric guitars, but we don't know how to play :)</p>
    <div class="social-links">
      <a href="https://twitter.com/Serene15763786" class="twitter"><i class="bx bxl-twitter"></i></a>
      <a href="https://www.facebook.com/phoebe.bu" class="facebook"><i class="bx bxl-facebook"></i></a>
      <a href="https://www.instagram.com/WingoC23/" class="instagram"><i class="bx bxl-instagram"></i></a>
      <a href="https://github.com/SereneTo" class="github"><i class="bx bxl-github"></i></a>

    </div>

    <div class="credits"></div>
  </div>
</footer>

</body>

<script src="/static/vendor/jquery/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
  // var validusername = false;
  // var validpassword = false;
  // var validrepassword = false;
  // var validemail= false;
  var messageusername = "Your username should be 4~16 characters";
  var messagepassword = "Your password should be 6~16 characters with at least 1 letter and at least 1 number";
  var messagerepassword = "Two passwords should be the same"
  var messageemail = "Your E-mail address is not valid";
  function alertusername() {
    var value = document.getElementById("username").value;
    var regex = /[a-zA-Z0-9]{4,16}$/; //正则表达式长度4-16且全部是数字或者字母
    if (regex.test(value) == false){
      document.getElementById("alertusername").innerHTML = messageusername;
    }
    else
      document.getElementById("alertusername").innerHTML = "";
      validusername = true;
  }
  function alertpassword() {
    var value = document.getElementById("password").value;
    var regex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,16}$/; //正则表达式长度6-16且至少有一个字母和至少一个数字
    if (regex.test(value) == false){
      document.getElementById("alertpassword").innerHTML = messagepassword;
    }
    else
      document.getElementById("alertpassword").innerHTML = "";
      validpassword = true;
  }
  function alertrepassword() {
    var password = document.getElementById("password").value;
    var repassword = document.getElementById("repassword").value;
    if (password != repassword){
      document.getElementById("alertrepassword").innerHTML = messagerepassword;
    }
    else
      document.getElementById("alertrepassword").innerHTML = "";
      validrepassword = true;
  }
  function alertemail() {
    var value = document.getElementById("email").value;
    var regex = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/; //正则表达式为邮箱
    if (regex.test(value) == false){
      document.getElementById("alertemail").innerHTML = messageemail;
    }
    else
      document.getElementById("alertemail").innerHTML = "";
      validemail = true;
  }

  $('#button-sign-up').click(function(){
    if (validusername == true && validpassword == true && validrepassword == true && validemail == true){
      $.ajax({
        type: "post",
        url: "{{urlfor "RegisterController.Post"}}",
        data:$("#sign-up").serialize(),
        dataType: 'json',
        success: function(returndata){
          console.log(returndata);
          if (returndata.status == 0) {
            if(returndata.check_username_dup == true){
            $("#check_username_dup")[0].innerHTML = "This name is already exists.";
            }
            if(returndata.check_email_dup == true){
            $("#check_email_dup")[0].innerHTML = "This E_mail address is already exists.";
            }
          }
          else if (returndata.status == -1) {
            alert(returndata.message);
            location.href = "{{urlfor "RegisterController.Get"}}";
          }
          else if(returndata.status ==1){
            alert(returndata.message);
            location.href = "{{urlfor "HomeController.Get"}}";
          }
        }
        // error: function () {
        //   alert('Something wrong happened. Please try again later.');
        // }
      })
    }
  })

  // $('#button-sign-up').click(function(){
  //   $("#check_username_dup")[0].innerHTML = "";
  //   $("#check_username_format")[0].innerHTML = "";
  //   $("#check_password")[0].innerHTML = "";
  //   $("#check_repassword")[0].innerHTML = "";
  //   $("#check_email")[0].innerHTML = "";
  //   $("#check_address1")[0].innerHTML = "";
  //   $.ajax({
  //     type: "post",
  //     url: "{{urlfor "RegisterController.Post"}}",
  //     data:$("#sign-up").serialize(),
  //     dataType: 'json',
  //     success: function(returndata){
  //       if(returndata.status == -1) {
  //         alert(returndata.message);
  //         location.href = "{{urlfor "RegisterController.Get"}}";
  //       }
  //       if(returndata.status ==1){
  //         alert(returndata.message);
  //         location.href = "{{urlfor "HomeController.Get"}}";
  //       }
  //       else{
  //         console.log(returndata);
  //         console.log({{.check_username_dup}})
  //         if(returndata.check_username_dup == true){
  //           $("#check_username_dup")[0].innerHTML = "This name is already used.";
  //         }
  //         if(returndata.check_username_format == true){
  //           $("#check_username_format")[0].innerHTML = "Your name should be a word in 4~16 characters.";
  //         }
  //         if(returndata.check_password == true){
  //           $("#check_password")[0].innerHTML = "Password should be 6~16 with at least 1 character.";
  //         }
  //         if(returndata.check_repassword == true){
  //           $("#check_repassword")[0].innerHTML = "2 passwords should be the same.";
  //         }
  //         if(returndata.check_email == true){
  //           $("#check_email")[0].innerHTML = "Please write a valid email address.";
  //         }
  //         if(returndata.check_email_dup == true){
  //           $("#check_email")[0].innerHTML = "This email is already used.";
  //         }
  //         if(returndata.check_address1 == true){
  //           $("#check_address1")[0].innerHTML = "1 address is required.";
  //         }
  //       }
  //     },
  //     error: function () {
  //
  //       alert('Please try later.');
  //     }
  //
  //   });
  // });
</script>

</html>
